<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to rotate paleocoordinates with the GPlates Web Service
">
<title>2. Online reconstruction • rgplates</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2. Online reconstruction">
<meta property="og:description" content="Learn how to rotate paleocoordinates with the GPlates Web Service
">
<meta property="og:image" content="https://adamkocsis.github.io/rgplates/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rgplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/1_installation.html">1. Installation</a>
    <a class="dropdown-item" href="../articles/2_online_reconstruction.html">2. Online Reconstruction with the GWS</a>
    <a class="dropdown-item" href="../articles/3_offline_reconstruction.html">3. Offline Reconstruction</a>
    <a class="dropdown-item" href="../articles/4_reconstruction_with_chronosphere.html">4. Reconstruction with chronosphere Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-internals">Internals</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-internals">
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
    <a class="dropdown-item" href="../articles/internals.html">Internal structure</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.evolv-ed.net/">How-to guides on EvolvED</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/adamkocsis/rgplates/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2. Online reconstruction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/adamkocsis/rgplates/blob/HEAD/vignettes/2_online_reconstruction.Rmd" class="external-link"><code>vignettes/2_online_reconstruction.Rmd</code></a></small>
      <div class="d-none name"><code>2_online_reconstruction.Rmd</code></div>
    </div>

    
    
<p>Out of the box, the package relies on the <a href="https://gws.gplates.org/" class="external-link">GPlates Web Service (GWS)</a>, an <strong>online</strong> service that executes paleogeographic rotations using data provided in URLs. <code>rgplates</code> <strong>(1)</strong> sends the data to the GWS, which <strong>(2)</strong> calculates paleocoordinates, and then <strong>(3)</strong> <code>rgplates</code> reads in the returned result. <strong>For this online method, you have to be connected to the internet</strong>.</p>
<p>To start, you have to attach the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://adamkocsis.github.io/rgplates/">rgplates</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: sf</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE</span></span></code></pre></div>
<p>When attached, <code>rgplates</code> automatically loads the <a href="https://cran.r-project.org/web/packages/sf/index.html" class="external-link"><em>Simple Features for R</em> (<code>sf</code>) package</a>, a standard R package used for processing vector spatial data.</p>
<hr>
<div class="section level2">
<h2 id="reconstructing-plates">Reconstructing plates<a class="anchor" aria-label="anchor" href="#reconstructing-plates"></a>
</h2>
<p>All paleocoordinate rotations are executed with the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function. The default model used by this is the model of the <a href="https://www.earthbyte.org/paleomap-paleoatlas-for-gplates/" class="external-link">PALEOMAP</a> project, developed by C. Scotese. <em>(If you look at the reference of <code><a href="../reference/reconstruct.html">reconstruct()</a></code>, you can see that by default <code>model="PALEOMAP"</code>).</em></p>
<p>Every tectonic model relies on plates, which are rotated on the surface of Earth. The plate positions can be reconstructed to any age that the model covers. The present-day positions of the plates can be queried with the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function, with the string <code>"plates"</code> passed as the first argument, and the target <code>age</code> set to <code>0</code> (in Ma).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pl0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"plates"</span>, age<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">pl0</span></span>
<span><span class="co">#&gt; Simple feature collection with 501 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 90</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  POLYGON ((-155.2068 19.5404...</span></span>
<span><span class="co">#&gt; 2  POLYGON ((-77.6715 24.7979,...</span></span>
<span><span class="co">#&gt; 3  POLYGON ((-77.6715 24.7979,...</span></span>
<span><span class="co">#&gt; 4  POLYGON ((-71.9396 20.9241,...</span></span>
<span><span class="co">#&gt; 5  POLYGON ((-78.3856 27.3354,...</span></span>
<span><span class="co">#&gt; 6  POLYGON ((-180 90, 180 90, ...</span></span>
<span><span class="co">#&gt; 7  POLYGON ((164.2599 89.0123,...</span></span>
<span><span class="co">#&gt; 8  POLYGON ((-106.0379 21.2018...</span></span>
<span><span class="co">#&gt; 9  POLYGON ((-112.1621 28.3617...</span></span>
<span><span class="co">#&gt; 10 POLYGON ((-108.7002 23.7579...</span></span></code></pre></div>
<p>The <code>rgplates</code> package relies on <a href="https://cran.r-project.org/web/packages/sf/index.html" class="external-link"><code>sf</code></a> to handle vector spatial data - like the plates. You can do anything with this that you normally can with and <code>sf</code> object: manipulate it, change its map projection, export or use it for calculations. These data are in standard <a href="https://en.wikipedia.org/wiki/Equirectangular_projection" class="external-link">equirectangular projection</a>, registered with longitude and latitude data.</p>
<p>You can plot the distribution of plates with the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function. To focus on the spatial data and not the attributes of the features (which are technical in nature), you can plot the geometries of this object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl0</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/presentdayplot-1.png" width="700"></p>
<p>Setting the <code>age</code> argument allows you to access the state of the plate tectonic configuration at past points in time. <code>age</code> accepts dates in millions of years. To reconstruct the position of the plates at around the Triassic/Jurassic boundary (approx. 200Ma), you have to set the <code>age</code> argument to <code>200</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pl200</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"plates"</span>, age<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">pl200</span></span>
<span><span class="co">#&gt; Simple feature collection with 142 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -180 ymin: -77.0625 xmax: 180 ymax: 90</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  POLYGON ((17.3375 17.8127, ...</span></span>
<span><span class="co">#&gt; 2  POLYGON ((-19.2369 72.1231,...</span></span>
<span><span class="co">#&gt; 3  POLYGON ((-19.3706 71.9604,...</span></span>
<span><span class="co">#&gt; 4  POLYGON ((-19.3706 71.9604,...</span></span>
<span><span class="co">#&gt; 5  POLYGON ((-2.4637 32.5774, ...</span></span>
<span><span class="co">#&gt; 6  POLYGON ((-19.7326 72.67, -...</span></span>
<span><span class="co">#&gt; 7  POLYGON ((-19.7326 72.67, -...</span></span>
<span><span class="co">#&gt; 8  POLYGON ((-19.6809 73.003, ...</span></span>
<span><span class="co">#&gt; 9  POLYGON ((-18.0301 72.7282,...</span></span>
<span><span class="co">#&gt; 10 POLYGON ((-18.6014 71.6729,...</span></span></code></pre></div>
<p>You can plot the results in a similar way:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/tjbplot-1.png" width="700"></p>
<p>Note that unlike the result for the present day (0Ma), the oceanic plates are not returned for the past plate configuration. <em>(Most models do not return the oceanic plates, this is a characteristic of the PALEOMAP model)</em></p>
<p>Again, both the <code>pl0</code> and the <code>pl200</code> objects are <code>sf</code>-class objects. You can customize their plotting as you would for any other <code>sf</code> object - for instance setting a fill color for the polygons and not plotting their boundaries.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/tjbplot2-1.png" width="700"></p>
<hr>
</div>
<div class="section level2">
<h2 id="individual-locations">Individual locations<a class="anchor" aria-label="anchor" href="#individual-locations"></a>
</h2>
<p>This is nice, but plotting the plates on their own has only so much use. The true use of <code><a href="../reference/reconstruct.html">reconstruct()</a></code> is the ability to calculate the paleocoordinates of present-day locations for a given <code>age</code>.</p>
<div class="section level4">
<h4 id="single-present-day-point">Single present-day point<a class="anchor" aria-label="anchor" href="#single-present-day-point"></a>
</h4>
<p>Let’s consider the location of London (<a href="https://www.google.com/maps/place/London,+Egyes%C3%BClt+Kir%C3%A1lys%C3%A1g/@51.528308,-0.3817792,10z/data=!3m1!4b1!4m5!3m4!1s0x47d8a00baf21de75:0x52963a5addd52a99!8m2!3d51.5072178!4d-0.1275862" class="external-link">here it is on Google maps</a>)! Either in the URL, or with the user interface of Google maps, you can find that the coordinates of the city center are around 51.52°N (latitude) and 0.38°W (longitude). To figure out where the city was at the Triassic/Jurassic boundary you need to: <strong>(1)</strong> register these coordinates in R; and <strong>(2)</strong> provide them to the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function.</p>
<p><em>Note that we are dealing with global-scale, approximate coordinates here. For more precise results, always make sure that the CRS of the points is matching the CRS of the maps (including ellipses)!</em></p>
<p>Because with the usually used equirectangular projection the <em>x</em>-axis of plotting become <em>longitude</em>, and the <em>y</em> axis becomes latitude, we usually register the coordinates in the order of longitude first, and latitude second (with easting longitudes and northing latitudes registered as positive values).</p>
<p>To make this structure absolutely clear, it is best to register coordinates as 2-column matrices, with <em>longitude</em> being the <em>first</em>, and <em>latitude</em> the <em>second</em> column:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the coordinates</span></span>
<span><span class="va">london</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.38</span>, <span class="fl">51.52</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make it a matrix</span></span>
<span><span class="va">londonMat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">london</span>, ncol<span class="op">=</span><span class="fl">2</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add column names (optional)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">londonMat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span></span>
<span><span class="va">londonMat</span></span>
<span><span class="co">#&gt;       long   lat</span></span>
<span><span class="co">#&gt; [1,] -0.38 51.52</span></span></code></pre></div>
<p>Since the coordinate reference system (CRS) of the maps is longitude-latitude, you can use these coordinates directly to indicate the positionx of the city on the present-day map using <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points()</a></code> - in this case with red plus signs:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl0</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">londonMat</span>, col<span class="op">=</span><span class="st">"red"</span>, pch<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/presentdayplotlondon-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="paleocoordinates-of-a-single-locality">Paleocoordinates of a single locality<a class="anchor" aria-label="anchor" href="#paleocoordinates-of-a-single-locality"></a>
</h4>
<p>Finding the paleocoordinates of such localities is as easy as calculating those of the plates. You have to use the matrix that you defined earlier (<code>londonMat</code>) as the first argument, of <code><a href="../reference/reconstruct.html">reconstruct()</a></code> (where <code>"plates"</code> was given earlier), and provide a target age in million years:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">londonMat200</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="va">londonMat</span>, age<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">londonMat200</span></span>
<span><span class="co">#&gt;      paleolong paleolat</span></span>
<span><span class="co">#&gt; [1,]    2.3267  38.1654</span></span></code></pre></div>
<p>The result of this calculation is a similar <code>matrix</code>: now including the paleolongitude and paleolatitude columns. If you provide coordinates as a plain <code>matrix</code>, coordinates are inferred to be longitude and latitude.</p>
<p>You can visualize this the same way, as you visualized the present-day position of the location:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">londonMat200</span>, col<span class="op">=</span><span class="st">"red"</span>, pch<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/londonPast-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="paleocoordinates-of-a-multiple-localities">Paleocoordinates of a multiple localities<a class="anchor" aria-label="anchor" href="#paleocoordinates-of-a-multiple-localities"></a>
</h4>
<p>If you want to reconstruct multiple locations, all you need to provide is more rows in the matrix. For instance, if you also want to calculate the positions of <a href="https://www.google.com/maps/place/Sydney+%C3%9Aj-D%C3%A9l-Wales,+Ausztr%C3%A1lia/@-33.8469759,150.3715249,9z/data=!3m1!4b1!4m5!3m4!1s0x6b129838f39a743f:0x3017d681632a850!8m2!3d-33.8688197!4d151.2092955" class="external-link">Sydney, AU</a> (33.85°S, 151.11°E) and <a href="https://www.google.com/maps/place/Montr%C3%A9al,+Qu%C3%A9bec,+Kanada/@45.5578125,-74.2723072,9z/data=!3m1!4b1!4m5!3m4!1s0x4cc91a541c64b70d:0x654e3138211fefef!8m2!3d45.5018869!4d-73.5673919" class="external-link">Montréal (CA)</a> (45.52°N, 73.61°W), you need to add these in a similar fashion.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># coordinates of the two other cities</span></span>
<span><span class="va">sydney</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">151.17</span>, <span class="op">-</span><span class="fl">33.85</span><span class="op">)</span></span>
<span><span class="va">montreal</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.61</span>, <span class="fl">45.52</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># all cities in a single matrix</span></span>
<span><span class="va">cities</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">london</span>, <span class="va">sydney</span>, <span class="va">montreal</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#optional column names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span></span>
<span><span class="va">cities</span></span>
<span><span class="co">#&gt;            long    lat</span></span>
<span><span class="co">#&gt; london    -0.38  51.52</span></span>
<span><span class="co">#&gt; sydney   151.17 -33.85</span></span>
<span><span class="co">#&gt; montreal -73.61  45.52</span></span></code></pre></div>
<p>Now that we have a matrix of longitudes and latitudes, all we need to do is use this as the first argument of the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cities200</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="va">cities</span>, age<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">cities200</span></span>
<span><span class="co">#&gt;      paleolong paleolat</span></span>
<span><span class="co">#&gt; [1,]    2.3267  38.1654</span></span>
<span><span class="co">#&gt; [2,]   79.1755 -60.6703</span></span>
<span><span class="co">#&gt; [3,]  -20.8903  26.0878</span></span></code></pre></div>
<p>Note that the order of entities remains the same. We can plot these the same way similar to a single city.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the background map</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the reconstructed cities </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">cities200</span>, col<span class="op">=</span><span class="st">"red"</span>, pch<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/citiesPlot-1.png" width="700"></p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="present-day-coastlines">Present-day coastlines<a class="anchor" aria-label="anchor" href="#present-day-coastlines"></a>
</h2>
<p>Some models the (<em>PaleoMAP</em> model included) allow you to access reconstructed positions of the present-day coastlines, which might help you orientate yourself better with the reconstructed plates. You can get these data if you pass the string <code>"coastlines"</code> as the first argument of the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coast200</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"coastlines"</span>, age<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">coast200</span></span>
<span><span class="co">#&gt; Simple feature collection with 1684 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -180 ymin: -75.177 xmax: 180 ymax: 90</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  POLYGON ((45.0875 -59.7758,...</span></span>
<span><span class="co">#&gt; 2  POLYGON ((50.5953 -57.2655,...</span></span>
<span><span class="co">#&gt; 3  POLYGON ((50.2727 -57.5174,...</span></span>
<span><span class="co">#&gt; 4  POLYGON ((45.7112 -63.0616,...</span></span>
<span><span class="co">#&gt; 5  POLYGON ((47.2433 -62.503, ...</span></span>
<span><span class="co">#&gt; 6  POLYGON ((46.1895 -63.1115,...</span></span>
<span><span class="co">#&gt; 7  POLYGON ((47.3493 -62.5483,...</span></span>
<span><span class="co">#&gt; 8  POLYGON ((46.3363 -62.9012,...</span></span>
<span><span class="co">#&gt; 9  POLYGON ((51.8124 -57.6803,...</span></span>
<span><span class="co">#&gt; 10 POLYGON ((45.5484 -63.5128,...</span></span></code></pre></div>
<p>This returns an <code>sf</code>-class object, similar to the plates. You can visualize these with <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> and draw them on top of the other maps, but you have to set the <code>add=TRUE</code>, otherwise a new plot will be created.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the background map</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the reconstructed cities </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">cities200</span>, col<span class="op">=</span><span class="st">"red"</span>, pch<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the coastlines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">coast200</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/citiesPlotCoast-1.png" width="700"></p>
<hr>
</div>
<div class="section level2">
<h2 id="other-reconstruction-models">Other reconstruction models<a class="anchor" aria-label="anchor" href="#other-reconstruction-models"></a>
</h2>
<p>If you look into the <a href="../reference/reconstruct.html#details"><em>Details</em> of the reference of <code>reconstruct()</code></a>, you will see that the <code>model</code> argument can be set to other character strings besides <code>"PALEOMAP".</code> These indicate other models that are accessible via the GPLates Web Service. For instance, if you want to execute the same calculations to <a href="#reconstructing-plates">reconstruct the position position of the plates at 200Ma</a>, with the Seton et al. 2012 model, all you have to do is set <code>model="SETON2012"</code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pl200seton</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"plates"</span>, age<span class="op">=</span><span class="fl">200</span>, model<span class="op">=</span><span class="st">"SETON2012"</span><span class="op">)</span></span>
<span><span class="va">pl200seton</span></span>
<span><span class="co">#&gt; Simple feature collection with 169 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 90</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  POLYGON ((24.0748 11.0834, ...</span></span>
<span><span class="co">#&gt; 2  POLYGON ((1.7994 52.0389, 2...</span></span>
<span><span class="co">#&gt; 3  POLYGON ((-4.8284 60.475, -...</span></span>
<span><span class="co">#&gt; 4  POLYGON ((-13.9214 54.9585,...</span></span>
<span><span class="co">#&gt; 5  POLYGON ((5.0225 49.7257, 4...</span></span>
<span><span class="co">#&gt; 6  POLYGON ((-15.5502 47.7084,...</span></span>
<span><span class="co">#&gt; 7  POLYGON ((12.1789 33.7875, ...</span></span>
<span><span class="co">#&gt; 8  POLYGON ((180 86.7543, 180 ...</span></span>
<span><span class="co">#&gt; 9  POLYGON ((-180 84.8695, -18...</span></span>
<span><span class="co">#&gt; 10 POLYGON ((10.5413 35.9903, ...</span></span></code></pre></div>
<p>You can compare this with the PaleoMAP model, by plotting this result on top of that with some transparency (e.g. a semi-transparent red, in <a href="https://www.w3schools.com/css/css_colors_rgb.asp" class="external-link">HTML RGBA</a>: <code>"#FF000077"</code>):</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pl200seton</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"#FF000077"</span>, add<span class="op">=</span><span class="cn">TRUE</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="2_online_reconstruction_files/figure-html/platescompare-1.png" width="700"></p>
<p>You can see that the the two reconstructions differ quite a bit, which becomes more apparent as we go back in time. Also, with the transparency, you can see how the plates overlap in convergent zones.</p>
<hr>
</div>
<div class="section level2">
<h2 id="disadvantages-of-the-online-method">Disadvantages of the <em>online method</em><a class="anchor" aria-label="anchor" href="#disadvantages-of-the-online-method"></a>
</h2>
<p>Although it is easy to set up, the <strong>online method</strong> has several limitations. For more complete control over the rotations you might want to try out the <strong>offline method</strong> <a href="">(see Tutorial 3 about the Offline Method)</a>.</p>
<p>If want to stick with the <strong>online method</strong>, you need to be aware of these limiting factors:</p>
<div class="section level4">
<h4 id="rounding-and-data-quantity">Rounding and data quantity<a class="anchor" aria-label="anchor" href="#rounding-and-data-quantity"></a>
</h4>
<p>The data for the <strong>online method</strong> are passed to the GWS through URLs, which imposes some technical limitations to rotations. The first limitation is that the ages have to be rounded to integers, which might affect the quality of your results.</p>
<p>The second potential issue is that the amount of data that can be transmitted is somewhat limited. This works fine for several hundred points, but for rotating thousands of coordinates, you definitely need to work with the <strong>offline method</strong> instead.</p>
<p>The <strong>offline method</strong> can handle ages like <code>17.24</code> Ma without problems, and an arbitary amount of data.</p>
</div>
<div class="section level4">
<h4 id="pre-built-models">Pre-built models<a class="anchor" aria-label="anchor" href="#pre-built-models"></a>
</h4>
<p>Although the <strong>online method</strong> is easy to set up, it uses-pre defined models to actually execute the rotations. If you cwant to use customized, or other models, which are not yet implemented in the GWS, you will need to use the <strong>offline</strong> method.</p>
</div>
<div class="section level4">
<h4 id="internet-connection">Internet connection<a class="anchor" aria-label="anchor" href="#internet-connection"></a>
</h4>
<p>Since the calculations are not performed on your computer, but by the servers that host the GWS, you cannot use this method if you have no internet connection. Also, if you think about reproducibility, it is easy to see that you have no control over whether this service remains usable in the future - and neither can we.</p>
<p>There are docker containers that allow you to instantiate the GWS, which might help with this issue - but if you really want to make sure that your code remains reproducible - you might want to try the <strong>offline method instead</strong>.</p>
</div>
<div class="section level4">
<h4 id="additional-options">Additional options<a class="anchor" aria-label="anchor" href="#additional-options"></a>
</h4>
<p>There are also some additional options that you can customize, which are not exposed for you to set in the GWS, which might affect your results.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://palaeobiology.nat.fau.de/people/instructors/kocsis/" class="external-link">Adam T. Kocsis</a>, <a href="https://www.gzn.nat.fau.eu/palaeontologie/team/wissenschaftler/nussaibah-raja-schoob/" class="external-link">Nussaibah B. Raja</a>, <a href="https://www.dfg.de/en/index.jsp" class="external-link"><img src="https://www.dfg.de/includes/bausteine/open_graph_de/dfgfallback.jpg" alt="dfg" width="80"></a>, <a href="https://www.gzn.nat.fau.eu/" class="external-link"><img src="https://www.gzn.nat.fau.de/files/2017/05/cropped-gzn-logo.jpg" alt="geozentrum" width="80"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
