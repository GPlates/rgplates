<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to rotate paleocoordinates with the GPlates Desktop Application
">
<title>3. Offline reconstruction • rgplates</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="3. Offline reconstruction">
<meta property="og:description" content="Learn how to rotate paleocoordinates with the GPlates Desktop Application
">
<meta property="og:image" content="https://gplates.github.io/rgplates/reference/figures/logo.png">
<meta property="og:image:alt" content="The rgplates sticker.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@atkocsis">
<meta name="twitter:site" content="@atkocsis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rgplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/1_installation.html">1. Installation</a>
    <a class="dropdown-item" href="../articles/2_online_reconstruction_backwards.html">2. Online Reconstruction with the GWS</a>
    <a class="dropdown-item" href="../articles/3_online_reconstrution_forward.html">3. Online Reconstruction using paleocoordinates</a>
    <a class="dropdown-item" href="../articles/4_offline_reconstruction.html">4. Offline Reconstruction</a>
    <a class="dropdown-item" href="../articles/5_reconstruction_with_chronosphere.html">5. Reconstruction with chronosphere Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-internals">Internals</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-internals">
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
    <a class="dropdown-item" href="../articles/internals.html">Internal structure</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.evolv-ed.net/">How-to guides on EvolvED</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gplates/rgplates/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="4_offline_reconstruction_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>3. Offline reconstruction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gplates/rgplates/blob/HEAD/vignettes/4_offline_reconstruction.Rmd" class="external-link"><code>vignettes/4_offline_reconstruction.Rmd</code></a></small>
      <div class="d-none name"><code>4_offline_reconstruction.Rmd</code></div>
    </div>

    
    
<p>Although the <strong>online reconstruction method</strong> can help with getting through quick calculations, the true power of the <code>rgplates</code> package lies in what we call the <strong>offline reconstruction method</strong>.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr>
<p>Instead of relying on connections to the <a href="https://gws.gplates.org/" class="external-link">GPlates Web Service</a>, the <strong>offline method</strong>, allows you to execute plate tectonic rotations locally, on your computer. For this, you need two things present on your computer besides the <code>rgplates</code> package:</p>
<ol style="list-style-type: decimal">
<li>The <a href="https://www.gplates.org/" class="external-link">GPlates desktop application</a>, to calculate the reconstructions</li>
<li>The actual tectonic model files, that you do the reconstructions with.</li>
</ol>
<p><br></p>
</div>
<div class="section level2">
<h2 id="the-gplates-desktop-application">The GPlates desktop application<a class="anchor" aria-label="anchor" href="#the-gplates-desktop-application"></a>
</h2>
<hr>
<p><img align="right" width="300" src="https://raw.githubusercontent.com/adamkocsis/rgplates/main/pkgdown/assets/New_GPlates_Logo.png" style="padding:10px;"></p>
<p>GPlates is the current standard program that we used to build, manipulate and employ plate tectonic reconstructions. GPlates has a very well developed Graphical User Interface (GUI), that you can use indepenently from anything in this tutorial. If you wish to learn more about GPlates itself, you can find a lot of material <a href="https://www.gplates.org/education" class="external-link">here</a>.</p>
<p>You will not have to leave the R environment or use the GUI of GPlates in order to use the <strong>offline method</strong> of<code>rgplates</code>. You just have to make sure that the application is installed on your computer, and <code>rgplates</code> will take care of the rest.</p>
<div class="section level4">
<h4 id="installing-gplates">Installing GPlates<a class="anchor" aria-label="anchor" href="#installing-gplates"></a>
</h4>
<p>Besides <a href="1_installation.html">installing the <code>rgplates</code> package</a>, you will have to install the <a href="(https://www.earthbyte.org/download-gplates-2-3/)" class="external-link">GPlates Desktop Application</a> on your computer. After seeing which file you need on your operating system, you will have to scroll down to the bottom of the page, select which file you wish to download and follow the instructions.</p>
<p>This has been tested on all major operating systems (Windows, Mac, and GNU/Linux), and has been working reliably with GPlates versions <code>v2.2</code> and <code>v2.3</code>. <code>rgplates</code> will be able to find the GPlates installation on <em>Mac</em> and <em>GNU/Linux</em> out of the box. There also should not be any issues on <em>Windows</em>, as long as you install GPlates to the default installation directory (do not change what is suggested during installation - unless you are asking for trouble!).</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="the-tectonic-models">The tectonic models<a class="anchor" aria-label="anchor" href="#the-tectonic-models"></a>
</h2>
<hr>
<p>To use the <strong>offline method</strong>, you have to have a tectonic model on your computer. Actually, there is no such thing as <em>a plate tectonic model</em>. From the technical point of view, every model consists at least two data items:</p>
<ul>
<li>the <strong>Partitioning polygons</strong>
</li>
<li>and the <strong>Reconstruction tree</strong> (aka. rotation file)</li>
</ul>
<p>The <strong>partitioning polygons</strong> are vector spatial data (polygons) that represent the present-day distribution of the tectonic plates. GPlates moves these polygons on the surface of Earth with rotations that are described in the <strong>reconstruction tree</strong>. These are typically developed together (which we usually refer to be <em>a model</em>), but they are stored separately in different files. In other words, GPlates is only the program to execute the rotations/reconstructions, but you also need to have the files</p>
<p>The <strong>online method</strong> relies on files that are on the servers of the GPlates Web Service. For instance, the partitioning polygons of the PaleoMAP model are visible if you just ask for the <code>"plates"</code>, the the present-day as age (i.e. <code>0</code>Ma).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attaching the package is necesary for both methods</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://adamtkocsis.com/rgplates/" class="external-link">rgplates</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: sf</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># this is still the online method:</span></span>
<span><span class="va">partPol</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"static_polygons"</span>, age<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># these are the partitioning polyongs visualized</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">partPol</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="4_offline_reconstruction_files/figure-html/example-1.png" width="960"></p>
<p>In order to use the <strong>offline method</strong> we need to</p>
<ol style="list-style-type: decimal">
<li>have both the <strong>partitioning polygons</strong> and the <strong>reconstruction tree</strong> on our computer,</li>
<li>represent them in R,</li>
<li>pass them to the <code><a href="../reference/reconstruct.html">reconstruct()</a></code> function.</li>
</ol>
<p><br></p>
</div>
<div class="section level2">
<h2 id="model-files">Model files<a class="anchor" aria-label="anchor" href="#model-files"></a>
</h2>
<hr>
<p>For the sake of making the first trial simple, we will be using model files of the PaleoMAP project, that are distributed with the <code>rgplates</code> package.</p>
<p>These files are in the package’s install directory in a zip archive. What we will do is:</p>
<ol style="list-style-type: decimal">
<li>Create a new temporary directory to store our model files</li>
<li>Unzip the model files there and</li>
<li>load them into R.</li>
</ol>
<p><em>Note: there are even simpler ways to get these files and represent them into R in other ways (such as with the <a href="https://chronosphere.info" class="external-link">chronosphere</a>, that we will look into in <a href="/articles/4_reconstruction_with_chronosphere.html">Tutorial 4.</a>) but for didactic purposes, I recommend doing this first with the way that follows.</em></p>
<div class="section level4">
<h4 id="temporary-directory">Temporary directory<a class="anchor" aria-label="anchor" href="#temporary-directory"></a>
</h4>
<p>Temporary directories are the best places to store transient data, files, that are created during a cacluation and which are not necessary outside your R session (of course you don’t need to store these here, you can use any directory on your computer).</p>
<p>Temporary directories are easy to create, you just have to use the <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> function, which will create such a directory for you, and also tell you where to find it:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">td</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmpji3d6F"</span></span></code></pre></div>
<p><em>Each operating system handles these differently, so don’t be surprised if yours don’t match the result above - actually, this will likely be different in every session when you run the function above.</em></p>
</div>
<div class="section level4">
<h4 id="unzipping-the-model">Unzipping the model<a class="anchor" aria-label="anchor" href="#unzipping-the-model"></a>
</h4>
<p>The files of the model are quite big, bigger than what is recommended by the CRAN guidelines, so they had to be compressed. We will have to unzip these using the <code><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip()</a></code> function - but first we have to find where they are.</p>
<p>The path to the R packages’ installation can be found using the <code><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the path to the rgplates package</span></span>
<span><span class="va">rgPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"rgplates"</span><span class="op">)</span></span></code></pre></div>
<p>You can confirm that this is the right path by listing out the contents of this directory with <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">rgPath</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "CITATION"    "data"        "DESCRIPTION" "extdata"     "help"       </span></span>
<span><span class="co">#&gt;  [6] "html"        "INDEX"       "LICENSE"     "Meta"        "NAMESPACE"  </span></span>
<span><span class="co">#&gt; [11] "NEWS.md"     "R"</span></span></code></pre></div>
<p>The model data are in the <code>extdata</code> directory, in the archive <code>paleomap_v3.zip</code>. We have to locate this archive and extract it to the temporary directory (the <code>exdir</code> argument)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">rgPath</span>,<span class="st">"extdata/paleomap_v3.zip"</span><span class="op">)</span>, exdir<span class="op">=</span><span class="va">td</span><span class="op">)</span></span></code></pre></div>
<p>You can confirm that the extraction has indeed happened by looking into the temporary directory:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">td</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "file23b291b9bfa78"                 "file23b292f02f0ca"                </span></span>
<span><span class="co">#&gt;  [3] "file23b2953970cf8"                 "file23b2977631f63"                </span></span>
<span><span class="co">#&gt;  [5] "file23b29776a1e35"                 "file23b298549006"                 </span></span>
<span><span class="co">#&gt;  [7] "PALEOMAP_PlateModel.rot"           "PALEOMAP_PlatePolygons.gpml"      </span></span>
<span><span class="co">#&gt;  [9] "PALEOMAP_PoliticalBoundaries.gpml" "rmarkdown-str23b292c801659.html"</span></span></code></pre></div>
<p>There are two files that are important for us: the one that ends with <code>.gpml</code> (the <strong>static plate polygons</strong> in GPlates Markup Language format) and the one that ends with <code>.rot</code> (the <strong>reconstruction tree/rotation file</strong>). We know the absolute paths to these files, they can be found at:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pathToPolygons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"PALEOMAP_PlatePolygons.gpml"</span><span class="op">)</span></span>
<span><span class="va">pathToPolygons</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmpji3d6F/PALEOMAP_PlatePolygons.gpml"</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pathToRotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"PALEOMAP_PlateModel.rot"</span><span class="op">)</span></span>
<span><span class="va">pathToRotations</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmpji3d6F/PALEOMAP_PlateModel.rot"</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="the-platemodel-class">The <code>platemodel</code>-class<a class="anchor" aria-label="anchor" href="#the-platemodel-class"></a>
</h2>
<hr>
<p>Now that we have the files and we know how to find them, we have represent them in R in some way, so we can indicate that we want them to be used with GPlates to do our plate tectonic reconstructions.</p>
<p>We need to create a <code>platemodel</code> class object to do just this. All we need to provide, is the paths to these files. The <strong>rotation file</strong> has a special place in the <code>platemodel</code> object, so that is to be provided separately. The <strong>static plate polygons</strong> become a feature collection, that has to be named. To make the interface behave the same way in the <strong>online method</strong> this will be called <code>"static_polygons"</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/platemodel.html">platemodel</a></span><span class="op">(</span></span>
<span>    features<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"static_polygons"</span><span class="op">=</span><span class="va">pathToPolygons</span><span class="op">)</span>,</span>
<span>    rotation<span class="op">=</span><span class="va">pathToRotations</span></span>
<span><span class="op">)</span></span>
<span><span class="va">pm</span></span>
<span><span class="co">#&gt; GPlates plate tectonic model.</span></span>
<span><span class="co">#&gt; rotation:                      "PALEOMAP_PlateModel.rot" </span></span>
<span><span class="co">#&gt; static_polygons:               "PALEOMAP_PlatePolygons.gpml"</span></span></code></pre></div>
<p>This is a <code>platemodel</code>-class object, which is actually nothing else but a thin wrapper that includes where the files are actually located.</p>
<p><strong>Now is a great time to mention that this is where the true flexibility of the <em>offline method</em> lies. You can use any third party model files here, as long as you provide the appropriate absolute paths to the files, the methods that follow should work. See more about this <a href="#alternative-ways-to-get-model-files">below</a></strong></p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="reconstructing-the-plates">Reconstructing the plates<a class="anchor" aria-label="anchor" href="#reconstructing-the-plates"></a>
</h2>
<hr>
<p>The recontruction itself works the same way, as with the <strong>online method</strong>, the only difference is that instead of using a string for the <code>model</code> argument (which defaults to <code>"MERDITH2021"</code>), we will use the <code>platemodel</code>-class object <code>pm</code>.</p>
<p>Here are the plates reconstructed for <code>100</code>Ma with the PaleoMAP model - now calculated with the offline method:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plOff100</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="st">"static_polygons"</span>, age<span class="op">=</span><span class="fl">100</span>, model<span class="op">=</span><span class="va">pm</span><span class="op">)</span></span>
<span><span class="va">plOff100</span></span>
<span><span class="co">#&gt; Simple feature collection with 176 features and 17 fields</span></span>
<span><span class="co">#&gt; Geometry type: GEOMETRY</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 90</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    APPEARANCE DISAPPEARA PlateID NAME DESCR PLATEID2               GPGIM_TYPE</span></span>
<span><span class="co">#&gt; 1           0          0     307 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 2           0          0     317 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 3           0          0     318 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 4           0          0     318 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 5           0          0     324 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 6           0          0     325 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 7           0          0     326 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 8           0          0     327 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 9           0          0     328 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt; 10          0          0     332 &lt;NA&gt;  &lt;NA&gt;        0 gpml:UnclassifiedFeature</span></span>
<span><span class="co">#&gt;                                      FEATURE_ID RECON_METH L_PLATE R_PLATE</span></span>
<span><span class="co">#&gt; 1  GPlates-a074f39a-5707-40a6-a430-f83bfe15b2f9       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 2  GPlates-3abdf9a1-c4c8-4def-8c86-2b25b95269fe       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 3  GPlates-c84f234b-adbd-4f52-9405-1c9e069a6a2c       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 4  GPlates-98e4413f-494d-4b32-9948-6f223204fd38       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 5  GPlates-d310c935-1c98-4d05-b25b-7850edf1f2d9       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 6  GPlates-9fbf671b-ac6a-4c2c-8112-9b50a66bff4b       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 7  GPlates-1fac7bb6-1a17-40aa-8311-49de470f27c2       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 8  GPlates-9aef7a27-3c7b-4dfa-bd69-dfd9d0fe02b1       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 9  GPlates-8028caed-9793-4a4b-9f52-065907811953       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt; 10 GPlates-6d7476bd-7ff6-4c6d-b1a7-5e617e21844c       &lt;NA&gt;       0       0</span></span>
<span><span class="co">#&gt;    SPREAD_ASY TYPE PLATEID1 FROMAGE TOAGE IMPORT_AGE</span></span>
<span><span class="co">#&gt; 1           0 &lt;NA&gt;      307       0     0         NA</span></span>
<span><span class="co">#&gt; 2           0 &lt;NA&gt;      317     140     0         NA</span></span>
<span><span class="co">#&gt; 3           0 &lt;NA&gt;      318     140     0         NA</span></span>
<span><span class="co">#&gt; 4           0 &lt;NA&gt;      318     140     0         NA</span></span>
<span><span class="co">#&gt; 5           0 &lt;NA&gt;      324     120     0         NA</span></span>
<span><span class="co">#&gt; 6           0 &lt;NA&gt;      325     140     0         NA</span></span>
<span><span class="co">#&gt; 7           0 &lt;NA&gt;      326     140     0         NA</span></span>
<span><span class="co">#&gt; 8           0 &lt;NA&gt;      327     160     0         NA</span></span>
<span><span class="co">#&gt; 9           0 &lt;NA&gt;      328     100     0         NA</span></span>
<span><span class="co">#&gt; 10          0 &lt;NA&gt;      332     100     0         NA</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  MULTIPOLYGON (((18.777 14.8...</span></span>
<span><span class="co">#&gt; 2  MULTIPOLYGON (((-11.93605 4...</span></span>
<span><span class="co">#&gt; 3  MULTIPOLYGON (((-12.35329 4...</span></span>
<span><span class="co">#&gt; 4  MULTIPOLYGON (((-10.12266 4...</span></span>
<span><span class="co">#&gt; 5  MULTIPOLYGON (((0.3944122 5...</span></span>
<span><span class="co">#&gt; 6  MULTIPOLYGON (((-9.975426 4...</span></span>
<span><span class="co">#&gt; 7  MULTIPOLYGON (((-7.277245 4...</span></span>
<span><span class="co">#&gt; 8  MULTIPOLYGON (((3.206152 50...</span></span>
<span><span class="co">#&gt; 9  MULTIPOLYGON (((1.64657 31....</span></span>
<span><span class="co">#&gt; 10 MULTIPOLYGON (((0.4759208 3...</span></span></code></pre></div>
<p>Note that this is a similar <code>sf</code> class object that we saw earlier with the <strong>online method</strong>, although it has somewhat more attributes. Nevertheless, you can visualize it the same way, using <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plOff100</span><span class="op">$</span><span class="va">geometry</span>, border<span class="op">=</span><span class="cn">NA</span>, col<span class="op">=</span><span class="st">"gray"</span><span class="op">)</span></span></code></pre></div>
<p><img src="4_offline_reconstruction_files/figure-html/platevisualize-1.png" width="960"></p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="reconstructing-points">Reconstructing points<a class="anchor" aria-label="anchor" href="#reconstructing-points"></a>
</h2>
<hr>
<p>Reconstructing the positions of points is similar to that of the <strong>online method</strong>. Again, the only difference is that you have to provide the <code>platemodel</code> object as the <code>model</code> argument. Here is the example from <a href="2_online_reconstruction.html">earlier</a> to calculate and visualize past positions of some cities, now with the <strong>offline method</strong>:</p>
<p>First, we get the data of localities:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">london</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.38</span>, <span class="fl">51.52</span><span class="op">)</span></span>
<span><span class="va">sydney</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">151.17</span>, <span class="op">-</span><span class="fl">33.85</span><span class="op">)</span></span>
<span><span class="va">montreal</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.61</span>, <span class="fl">45.52</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># all cities in a single matrix</span></span>
<span><span class="va">cities</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">london</span>, <span class="va">sydney</span>, <span class="va">montreal</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#optional column names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span></span>
<span><span class="va">cities</span></span>
<span><span class="co">#&gt;            long    lat</span></span>
<span><span class="co">#&gt; london    -0.38  51.52</span></span>
<span><span class="co">#&gt; sydney   151.17 -33.85</span></span>
<span><span class="co">#&gt; montreal -73.61  45.52</span></span></code></pre></div>
<p>Second, we reconstruct with our model</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cities100</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reconstruct.html">reconstruct</a></span><span class="op">(</span><span class="va">cities</span>, age<span class="op">=</span><span class="fl">100</span>, model<span class="op">=</span><span class="va">pm</span><span class="op">)</span></span>
<span><span class="va">cities100</span></span>
<span><span class="co">#&gt;           paleolong  paleolat</span></span>
<span><span class="co">#&gt; london     1.550889  39.94383</span></span>
<span><span class="co">#&gt; sydney   144.703860 -64.28464</span></span>
<span><span class="co">#&gt; montreal -35.631821  37.69961</span></span></code></pre></div>
<p>And then we plot:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the background map</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plOff100</span><span class="op">$</span><span class="va">geometry</span>, col<span class="op">=</span><span class="st">"gray"</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the reconstructed cities </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">cities100</span>, col<span class="op">=</span><span class="st">"red"</span>, pch<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="4_offline_reconstruction_files/figure-html/citiesPlot-1.png" width="960"></p>
<p>Note: in order to to this, a plateID needs to be assigned to every point. We use the <code>partitioning</code> argument to select which feature collection of the <code>platemodel</code> object will be used as partitioning polygons. This defaults to <code>"static_polygons"</code> (check out the documentation of <code><a href="../reference/reconstruct.html">reconstruct()</a></code>!), so we did not have to say anything here. For other <code>platemodel</code> objects, you might need to set this explicitly!</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="alternative-ways-to-get-model-files">Alternative ways to get model files<a class="anchor" aria-label="anchor" href="#alternative-ways-to-get-model-files"></a>
</h2>
<hr>
<p>The model files are available from the EarthByte Resources page. For instance, the files of the PaleoMAP model that we used here, are available at: <a href="https://www.earthbyte.org/paleomap-paleoatlas-for-gplates/" class="external-link uri">https://www.earthbyte.org/paleomap-paleoatlas-for-gplates/</a>.</p>
<p>On the bottom of the page, you will find a single link : <em>Link to rasters, reconstruction files and tutorial</em> which will allow you to download the <code>Scotese_Paleoatlas_v3.zip</code> file. In this zip file, in the directory <code>PALEOMAP Global Plate Model</code>, you can see the same files that we had earlier:</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/adamkocsis/rgplates/main/pkgdown/assets/paleomap_archive.png" alt=""><p class="caption">The contents of the archive</p>
</div>
<p>You can use these, or any similar files to create <code>platemodel</code> objects, as long as you provide the <strong>absolute</strong> paths to the files.</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="the-chronosphere">The chronosphere<a class="anchor" aria-label="anchor" href="#the-chronosphere"></a>
</h2>
<hr>
<p>As you can see, handling these files are quite tedious, and we, the developers of <code>rgplates</code>, barely ever use these in such a way. For practical applications we recommend using the offline method of <code>rgplates</code> with the <code>chronosphere</code>, which you can learn more about in the next tutorial: <a href="5_reconstruction_with_chronosphere.html">5. Reconstructions with the chronosphere</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://palaeobiology.nat.fau.de/people/instructors/kocsis/" class="external-link">Adam T. Kocsis</a>, <a href="https://www.gzn.nat.fau.eu/palaeontologie/team/wissenschaftler/nussaibah-raja-schoob/" class="external-link">Nussaibah B. Raja</a>, <a href="https://www.dfg.de/en/index.jsp" class="external-link"><img src="https://github.com/gplates/rgplates/blob/devel/pkgdown/assets/dfg.png?raw=true" alt="dfg" width="80"></a>, <a href="https://www.gzn.nat.fau.eu/" class="external-link"><img src="https://github.com/gplates/rgplates/blob/devel/pkgdown/assets/GeoZentrum.svg?raw=true" alt="geozentrum" width="80"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
